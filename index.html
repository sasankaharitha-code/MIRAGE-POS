<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirage Fine Jewelery POS</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Dexie.js -->
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#0f172a', // Slate 900
                        secondary: '#1e293b', // Slate 800
                        accent: '#eab308', // Yellow 500 (Gold-ish)
                        surface: '#ffffff',
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-50 text-slate-900 font-sans antialiased h-screen flex overflow-hidden">

    <!-- Login Screen Overlay -->
    <div id="login-screen"
        class="fixed inset-0 z-50 bg-slate-900 flex items-center justify-center p-4 transition-all duration-300">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-slate-800 to-accent"></div>

            <div class="text-center mb-8">
                <img src="Mirage Logo.png" alt="Mirage" class="h-16 mx-auto mb-4 object-contain">
                <h2 class="text-2xl font-bold text-slate-800">Welcome Back</h2>
                <p class="text-slate-500 text-sm">Sign in to continue to POS System</p>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Username</label>
                    <input type="text" id="login-username"
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-gray-50 focus:bg-white"
                        placeholder="Enter username">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                    <input type="password" id="login-password"
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-gray-50 focus:bg-white"
                        placeholder="Enter password">
                </div>
                <button onclick="login()"
                    class="w-full py-3.5 bg-slate-900 hover:bg-black text-white font-bold rounded-xl shadow-lg shadow-slate-900/10 active:scale-[0.98] transition-all mt-4">
                    Sign In
                </button>
            </div>

            <div class="mt-6 text-center text-xs text-gray-400">
                <p>Â© 2024 Mirage Fine Jewelery</p>
                <p>Licensed Version</p>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <aside class="w-64 bg-primary text-white flex flex-col shadow-xl z-20 print:hidden transition-all duration-300">
        <div class="p-6 flex justify-center">
            <!-- Increased Sidebar Logo Size -->
            <img src="Mirage Logo.png" alt="Mirage Fine Jewelery" class="w-48 h-auto object-contain">
        </div>

        <nav class="flex-1 px-4 space-y-2 mt-4">
            <button onclick="navigateTo('dashboard')" id="nav-dashboard"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Dashboard</span>
            </button>
            <button onclick="navigateTo('pos')" id="nav-pos"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="shopping-cart" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Point of Sale</span>
            </button>
            <button onclick="navigateTo('inventory')" id="nav-inventory"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="package" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Inventory</span>
            </button>
            <button onclick="navigateTo('sales')" id="nav-sales"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="receipt" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Sales History</span>
            </button>
            <button onclick="navigateTo('quotations')" id="nav-quotations"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="file-text" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Quotations</span>
            </button>
            <button onclick="navigateTo('shipments')" id="nav-shipments"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="container" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Shipments</span>
            </button>
            <button onclick="navigateTo('reports')" id="nav-reports"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="pie-chart" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Reports</span>
            </button>
            <button onclick="navigateTo('vendors')" id="nav-vendors"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group">
                <i data-lucide="truck" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">Vendors</span>
            </button>
            <button onclick="navigateTo('users')" id="nav-users"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-300 hover:bg-slate-800 hover:text-white transition-all group hidden">
                <i data-lucide="users" class="w-5 h-5 group-hover:text-accent transition-colors"></i>
                <span class="font-medium">User Management</span>
            </button>
        </nav>

        <div class="p-4 border-t border-slate-800 space-y-1">
            <button onclick="navigateTo('settings')" id="nav-settings"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 hover:text-white transition-all">
                <i data-lucide="settings" class="w-5 h-5"></i>
                <span class="font-medium">Settings</span>
            </button>
            <button onclick="logout()"
                class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-slate-800 hover:text-red-300 transition-all">
                <i data-lucide="log-out" class="w-5 h-5"></i>
                <span class="font-medium">Logout</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full bg-gray-50 overflow-hidden relative">
        <!-- Header -->
        <header
            class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 shadow-sm print:hidden">
            <h2 id="page-title" class="text-xl font-semibold text-slate-800">Dashboard</h2>
            <div class="flex items-center gap-4">
                <button onclick="refreshAppState(); showToast('Data refreshed');" title="Force Refresh Data"
                    class="p-2 text-slate-400 hover:text-accent hover:bg-slate-50 rounded-full transition-all">
                    <i data-lucide="refresh-cw" class="w-5 h-5"></i>
                </button>
                <div class="text-sm text-right hidden sm:block">
                    <p class="font-medium text-slate-900" id="current-date">Fetching date...</p>
                    <p class="text-slate-500 text-xs text-right" id="current-time">...</p>
                </div>
                <div class="w-10 h-10 rounded-full bg-accent/20 flex items-center justify-center text-accent font-bold">
                    M
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div id="content-area" class="flex-1 overflow-y-auto p-6 relative">
            <!-- Views will be injected here -->

            <!-- Dashboard View -->
            <div id="view-dashboard" class="view hidden space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-500 font-medium">Total Sales (Today)</p>
                            <h3 class="text-2xl font-bold text-slate-800 mt-1" id="dash-today-sales">0.00</h3>
                        </div>
                        <div class="p-3 bg-green-50 text-green-600 rounded-xl">
                            <i data-lucide="dollar-sign" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-500 font-medium">Total Profit (Today)</p>
                            <h3 class="text-2xl font-bold text-slate-800 mt-1" id="dash-today-profit">0.00</h3>
                        </div>
                        <div class="p-3 bg-blue-50 text-blue-600 rounded-xl">
                            <i data-lucide="trending-up" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-500 font-medium">Total Products</p>
                            <h3 class="text-2xl font-bold text-slate-800 mt-1" id="dash-total-products">0</h3>
                        </div>
                        <div class="p-3 bg-purple-50 text-purple-600 rounded-xl">
                            <i data-lucide="package" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-500 font-medium">Low Stock Items</p>
                            <h3 class="text-2xl font-bold text-red-600 mt-1" id="dash-low-stock">0</h3>
                        </div>
                        <div class="p-3 bg-red-50 text-red-600 rounded-xl">
                            <i data-lucide="alert-triangle" class="w-6 h-6"></i>
                        </div>
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-semibold text-slate-800">Recent Transactions</h3>
                        <button onclick="navigateTo('sales')"
                            class="text-sm text-accent hover:underline font-medium">View All</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-600">
                                <tr>
                                    <th class="px-6 py-4 font-medium">Invoice No</th>
                                    <th class="px-6 py-4 font-medium">Date</th>
                                    <th class="px-6 py-4 font-medium">Items</th>
                                    <th class="px-6 py-4 font-medium text-right">Amount</th>
                                    <th class="px-6 py-4 font-medium text-center">Type</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="dash-recent-sales">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- POS View -->
            <div id="view-pos" class="view hidden h-full flex flex-col lg:flex-row gap-6">
                <!-- Left: Product List -->
                <div
                    class="flex-1 flex flex-col h-full bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-4 border-b border-gray-100 flex gap-4">
                        <div class="relative flex-1">
                            <i data-lucide="search"
                                class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                            <input type="text" id="pos-search" placeholder="Search products..."
                                class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                        </div>
                        <select id="pos-category-filter"
                            class="px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 bg-white">
                            <option value="all">All Categories</option>
                            <option value="Jewelry">Jewelry</option>
                            <option value="Fancy">Fancy</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-y-auto p-4 grid grid-cols-2 md:grid-cols-4 xl:grid-cols-6 gap-4 content-start"
                        id="pos-product-grid">
                        <!-- Product Cards injected here -->
                    </div>
                </div>

                <!-- Right: Cart -->
                <!-- Right: Cart -->
                <div
                    class="w-full lg:w-[320px] h-full flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-3 border-b border-gray-100 bg-gray-50/50 flex flex-col gap-2">
                        <!-- Pricing Toggle & Clear -->
                        <div class="flex items-center gap-2">
                            <div class="flex-1 flex bg-gray-200 p-1 rounded-lg">
                                <button onclick="setPriceType('retail')" id="btn-retail"
                                    class="flex-1 py-1 text-xs font-bold uppercase tracking-wide rounded-md transition-all shadow-sm bg-white text-slate-900">Retail</button>
                                <button onclick="setPriceType('wholesale')" id="btn-wholesale"
                                    class="flex-1 py-1 text-xs font-bold uppercase tracking-wide rounded-md transition-all text-gray-500 hover:text-slate-900">Wholesale</button>
                            </div>
                            <button onclick="clearCart()"
                                class="p-2 text-red-500 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"
                                title="Clear Cart">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-3 space-y-2" id="pos-cart-items">
                        <!-- Cart Items injected here -->
                        <div class="text-center py-10 text-gray-400">
                            <i data-lucide="shopping-cart" class="w-10 h-10 mx-auto mb-2 opacity-50"></i>
                            <p class="text-xs">Empty</p>
                        </div>
                    </div>

                    <div class="p-4 bg-gray-50 border-t border-gray-200 space-y-3">
                        <div class="flex justify-between items-center text-sm">
                            <span class="font-medium text-slate-600">Items: <span id="cart-count">0</span></span>
                            <span class="text-xl font-bold text-accent" id="cart-total">0.00</span>
                        </div>

                        <div class="flex gap-2">
                            <button onclick="openCheckoutModal()"
                                class="w-full py-4 bg-primary hover:bg-slate-800 text-white font-bold rounded-xl shadow-lg shadow-blue-900/10 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
                                Checkout <i data-lucide="arrow-right" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory View -->
            <div id="view-inventory" class="view hidden space-y-6">
                <div class="flex justify-between items-center">
                    <div class="relative w-96">
                        <i data-lucide="search"
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                        <input type="text" id="inv-search" placeholder="Search inventory..."
                            class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-white shadow-sm">
                    </div>
                    <div class="flex gap-2">
                        <button onclick="openShipmentModal()"
                            class="px-5 py-2.5 bg-white border border-gray-200 text-slate-600 hover:bg-gray-50 font-medium rounded-xl transition-all flex items-center gap-2 shadow-sm">
                            <i data-lucide="container" class="w-5 h-5"></i> Import Shipment
                        </button>
                        <button onclick="prepareAddProduct()"
                            class="px-5 py-2.5 bg-accent hover:bg-yellow-600 text-white font-medium rounded-xl shadow-md shadow-yellow-500/20 active:scale-[0.98] transition-all flex items-center gap-2">
                            <i data-lucide="plus" class="w-5 h-5"></i> Add Product
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-600 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 font-medium">Product Name</th>
                                    <th class="px-6 py-4 font-medium">Category</th>
                                    <th class="px-6 py-4 font-medium">Vendor</th>
                                    <th class="px-6 py-4 font-medium">Cost</th>
                                    <th class="px-6 py-4 font-medium">Retail</th>
                                    <th class="px-6 py-4 font-medium">Wholesale</th>
                                    <th class="px-6 py-4 font-medium">Stock</th>
                                    <th class="px-6 py-4 font-medium text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="inventory-list">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sales History View -->
            <div id="view-sales" class="view hidden space-y-6">
                <div class="flex justify-between items-center">
                    <div class="relative w-96">
                        <i data-lucide="search"
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                        <input type="text" id="sales-search" placeholder="Search by Invoice No..."
                            class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-white shadow-sm">
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-600 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 font-medium">Invoice No</th>
                                    <th class="px-6 py-4 font-medium">Date</th>
                                    <th class="px-6 py-4 font-medium">Customer Type</th>
                                    <th class="px-6 py-4 font-medium text-right">Total Amount</th>
                                    <th class="px-6 py-4 font-medium text-right">Profit</th>
                                    <th class="px-6 py-4 font-medium text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="sales-list">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Quotations View -->
            <div id="view-quotations" class="view hidden space-y-6">
                <div class="flex justify-between items-center">
                    <div class="relative w-96">
                        <i data-lucide="search"
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                        <input type="text" id="quotes-search" placeholder="Search by Quotation No..."
                            class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-white shadow-sm">
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-600 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 font-medium">Quotation No</th>
                                    <th class="px-6 py-4 font-medium">Date</th>
                                    <th class="px-6 py-4 font-medium">Customer</th>
                                    <th class="px-6 py-4 font-medium text-right">Total Amount</th>
                                    <th class="px-6 py-4 font-medium text-center">Status</th>
                                    <th class="px-6 py-4 font-medium text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="quotations-list">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Shipments View -->
            <div id="view-shipments" class="view hidden space-y-6">
                <div class="flex justify-between items-center">
                    <div class="relative w-96">
                        <i data-lucide="search"
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                        <input type="text" id="ship-search" placeholder="Search by ID or Vendor..."
                            class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-white shadow-sm">
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-600 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 font-medium">Shipment ID</th>
                                    <th class="px-6 py-4 font-medium">Date</th>
                                    <th class="px-6 py-4 font-medium">Vendor</th>
                                    <th class="px-6 py-4 font-medium text-center">Items</th>
                                    <th class="px-6 py-4 font-medium text-right">Shipping Cost</th>
                                    <th class="px-6 py-4 font-medium text-center">Status</th>
                                    <th class="px-6 py-4 font-medium text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="shipments-list">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="view-reports" class="view hidden space-y-6">
                <!-- Financial Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32">
                        <p class="text-sm text-gray-500 font-medium">Total Revenue (Net)</p>
                        <h3 class="text-2xl font-bold text-slate-800" id="report-revenue">0.00</h3>
                        <div class="w-full bg-gray-100 h-1 rounded-full overflow-hidden mt-2">
                            <div class="bg-blue-500 h-full w-full"></div>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32">
                        <p class="text-sm text-gray-500 font-medium">Total COGS (Est.)</p>
                        <h3 class="text-2xl font-bold text-slate-800" id="report-cogs">0.00</h3>
                        <div class="w-full bg-gray-100 h-1 rounded-full overflow-hidden mt-2">
                            <div class="bg-orange-400 h-full w-3/4"></div>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32">
                        <p class="text-sm text-gray-500 font-medium">Total Discounts</p>
                        <h3 class="text-2xl font-bold text-slate-800" id="report-discount">0.00</h3>
                        <div class="w-full bg-gray-100 h-1 rounded-full overflow-hidden mt-2">
                            <div class="bg-red-400 h-full w-1/4"></div>
                        </div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32">
                        <p class="text-sm text-gray-500 font-medium">Net Profit</p>
                        <h3 class="text-2xl font-bold text-green-600" id="report-profit">0.00</h3>
                        <div class="w-full bg-gray-100 h-1 rounded-full overflow-hidden mt-2">
                            <div class="bg-green-500 h-full w-1/2"></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Fast Moving Items -->
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                        <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <i data-lucide="trending-up" class="w-5 h-5 text-green-500"></i> Fast Moving Items
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-gray-50 text-gray-500 font-medium border-b border-gray-100">
                                    <tr>
                                        <th class="px-4 py-2 w-12">#</th>
                                        <th class="px-4 py-2">Product</th>
                                        <th class="px-4 py-2 text-center">Qty Sold</th>
                                        <th class="px-4 py-2 text-right">Revenue</th>
                                    </tr>
                                </thead>
                                <tbody id="report-fast-moving" class="divide-y divide-gray-50">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Slow Moving / Dead Stock -->
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                        <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <i data-lucide="alert-circle" class="w-5 h-5 text-red-500"></i> Slow Moving (Dead Stock)
                        </h3>
                        <p class="text-xs text-gray-400 mb-4">Items with stock > 0 but low sales.</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-gray-50 text-gray-500 font-medium border-b border-gray-100">
                                    <tr>
                                        <th class="px-4 py-2">Product</th>
                                        <th class="px-4 py-2 text-center">Qty Sold</th>
                                        <th class="px-4 py-2 text-right">Revenue</th>
                                    </tr>
                                </thead>
                                <tbody id="report-slow-moving" class="divide-y divide-gray-50">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vendors View -->
            <div id="view-vendors" class="view hidden space-y-6">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold">Vendor Directory</h3>
                    <button onclick="openModal('modal-add-vendor')"
                        class="px-5 py-2.5 bg-accent hover:bg-yellow-600 text-white font-medium rounded-xl shadow-md shadow-yellow-500/20 active:scale-[0.98] transition-all flex items-center gap-2">
                        <i data-lucide="plus" class="w-5 h-5"></i> Add Vendor
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="vendor-list">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Settings View -->
            <div id="view-settings" class="view hidden space-y-6">
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100 max-w-2xl">
                    <h3 class="text-lg font-semibold mb-6 flex items-center gap-2">
                        <i data-lucide="database" class="w-5 h-5 text-accent"></i> Data Management
                    </h3>

                    <div class="space-y-6">
                        <div class="p-4 bg-yellow-50 rounded-xl border border-yellow-100">
                            <h4 class="font-bold text-yellow-800 mb-2 flex items-center gap-2"><i
                                    data-lucide="alert-circle" class="w-4 h-4"></i> Important Warning</h4>
                            <p class="text-sm text-yellow-700">All data is stored locally in your browser. Clearing
                                your
                                browser's "Site Data" or "Cache" may delete your database. Please create regular
                                backups.</p>
                        </div>

                        <div class="flex gap-4">
                            <button onclick="exportData()"
                                class="flex-1 py-3 bg-primary text-white rounded-xl shadow-sm hover:bg-slate-800 transition-all flex items-center justify-center gap-2">
                                <i data-lucide="download" class="w-4 h-4"></i> Backup Data (Export JSON)
                            </button>
                            <label class="flex-1">
                                <input type="file" id="import-file" class="hidden" onchange="importData(this)">
                                <div
                                    class="w-full py-3 bg-white border border-gray-200 text-slate-700 rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2 cursor-pointer">
                                    <i data-lucide="upload" class="w-4 h-4"></i> Restore Data (Import JSON)
                                </div>
                            </label>
                        </div>

                        <div class="pt-6 border-t border-gray-100">
                            <h4 class="font-medium mb-4">Reset Application</h4>
                            <button onclick="resetDatabase()"
                                class="px-6 py-2.5 bg-red-50 text-red-600 hover:bg-red-100 rounded-xl transition-all font-medium text-sm flex items-center gap-2">
                                <i data-lucide="trash-2" class="w-4 h-4"></i> Factory Reset Database
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Management View (Admin Only) -->
            <div id="view-users" class="view hidden space-y-6">
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100 max-w-4xl">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold flex items-center gap-2">
                            <i data-lucide="users" class="w-5 h-5 text-accent"></i> User Management
                        </h3>
                        <button onclick="registerUser()"
                            class="px-5 py-2.5 bg-accent hover:bg-yellow-600 text-white font-medium rounded-xl shadow-md shadow-yellow-500/20 active:scale-[0.98] transition-all flex items-center gap-2">
                            <i data-lucide="plus" class="w-5 h-5"></i> Add User
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-left text-sm">
                                <thead class="bg-gray-50 text-gray-600 border-b border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 font-medium">Username</th>
                                        <th class="px-6 py-4 font-medium">Role</th>
                                        <th class="px-6 py-4 font-medium text-right">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-list" class="divide-y divide-gray-100">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Modals -->

    <!-- Add Product Modal -->
    <div id="modal-add-product"
        class="modal fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden items-center justify-center opacity-0 transition-opacity">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 transform scale-95 transition-transform duration-200 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                <h3 class="font-semibold text-lg text-slate-800">Add New Product</h3>
                <button onclick="closeModal('modal-add-product')"
                    class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <form id="form-add-product" onsubmit="handleProductSubmit(event)" class="p-6 space-y-4">
                <input type="hidden" id="prod-id">

                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
                        <input type="text" id="prod-name" required
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <select id="prod-category"
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 bg-white">
                            <option value="Jewelry">Jewelry</option>
                            <option value="Fancy">Fancy</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Vendor</label>
                        <select id="prod-vendor"
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 bg-white">
                            <option value="General">General</option>
                            <!-- Populated JS -->
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Cost Price</label>
                        <input type="number" id="prod-cost" step="0.01" required
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Stock Qty</label>
                        <input type="number" id="prod-stock" required
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Retail Price</label>
                        <input type="number" id="prod-retail" step="0.01" required
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-green-50/50 border-green-100">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Wholesale Price</label>
                        <input type="number" id="prod-wholesale" step="0.01" required
                            class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all bg-blue-50/50 border-blue-100">
                    </div>
                </div>

                <div class="pt-4 flex justify-end gap-3">
                    <button type="button" onclick="closeModal('modal-add-product')"
                        class="px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-50 font-medium transition-all">Cancel</button>
                    <button type="submit"
                        class="px-5 py-2.5 bg-primary hover:bg-slate-800 text-white font-medium rounded-xl shadow-lg shadow-slate-900/10 active:scale-[0.98] transition-all">Save
                        Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Vendor Modal -->
    <div id="modal-add-vendor"
        class="modal fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden items-center justify-center opacity-0 transition-opacity">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 transform scale-95 transition-transform duration-200 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                <h3 class="font-semibold text-lg text-slate-800">Add New Vendor</h3>
                <button onclick="closeModal('modal-add-vendor')"
                    class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <form id="form-add-vendor" onsubmit="handleVendorSubmit(event)" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Vendor Name</label>
                    <input type="text" id="vendor-name" required
                        class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Contact Info (Optional)</label>
                    <input type="text" id="vendor-contact"
                        class="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 transition-all">
                </div>
                <div class="pt-4 flex justify-end gap-3">
                    <button type="button" onclick="closeModal('modal-add-vendor')"
                        class="px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-50 font-medium transition-all">Cancel</button>
                    <button type="submit"
                        class="px-5 py-2.5 bg-primary hover:bg-slate-800 text-white font-medium rounded-xl shadow-lg shadow-slate-900/10 active:scale-[0.98] transition-all">Save
                        Vendor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Shipment / Bulk Import Modal -->
    <div id="modal-add-shipment"
        class="modal fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden items-center justify-center opacity-0 transition-opacity">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-4 h-[90vh] flex flex-col transform scale-95 transition-transform duration-200">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 flex-shrink-0">
                <div>
                    <h3 class="font-semibold text-lg text-slate-800">Import Shipment (AliExpress / Bulk)</h3>
                    <p class="text-xs text-gray-500">Delivery cost will be distributed equally among all units.</p>
                </div>
                <button onclick="closeModal('modal-add-shipment')"
                    class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="flex-1 overflow-y-auto p-6 space-y-6">
                <!-- Shipment Info -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-4 bg-blue-50/50 border border-blue-100 rounded-xl">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Vendor</label>
                        <select id="ship-vendor"
                            class="w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 bg-white">
                            <option value="AliExpress">AliExpress</option>
                            <option value="General">General</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Total Shipping Cost (Rs.)</label>
                        <input type="number" id="ship-cost" value="0" min="0" step="0.01"
                            class="w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Exchange Rate (Optional)</label>
                        <input type="number" id="ship-rate" value="1" min="0.01" step="0.01"
                            placeholder="e.g. 300 (USD to LKR)"
                            class="w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50"
                            title="If you verify costs in USD, enter rate here. Keep 1 for LKR.">
                    </div>
                </div>

                <!-- Items Table -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-50 text-gray-600 font-medium border-b border-gray-100">
                            <tr>
                                <th class="px-4 py-3 w-10">#</th>
                                <th class="px-4 py-3">Product Name</th>
                                <th class="px-4 py-3 w-24">Category</th>
                                <th class="px-4 py-3 w-20 text-center">Qty</th>
                                <th class="px-4 py-3 w-32 text-right">Unit Cost (Base)</th>
                                <th class="px-4 py-3 w-32 text-right">Retail Price</th>
                                <th class="px-4 py-3 w-10"></th>
                            </tr>
                        </thead>
                        <tbody id="shipment-items" class="divide-y divide-gray-100">
                            <!-- Rows -->
                        </tbody>
                    </table>
                    <div class="p-2 border-t border-gray-100 bg-gray-50">
                        <button onclick="addShipmentRow()"
                            class="w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-accent hover:text-accent font-medium transition-all flex items-center justify-center gap-2">
                            <i data-lucide="plus" class="w-4 h-4"></i> Add Item Row
                        </button>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-100 flex justify-between items-center bg-gray-50 flex-shrink-0">
                <div class="text-sm">
                    <span class="text-gray-500">Total Items:</span> <span id="ship-total-qty"
                        class="font-bold text-slate-800">0</span>
                    <span class="mx-2 text-gray-300">|</span>
                    <span class="text-gray-500">Est. Shipping/Unit:</span> <span id="ship-per-unit"
                        class="font-bold text-blue-600">0.00</span>
                </div>
                <div class="flex gap-3">
                    <button onclick="closeModal('modal-add-shipment')"
                        class="px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 font-medium transition-all">Cancel</button>
                    <button onclick="saveShipment()"
                        class="px-5 py-2.5 bg-primary hover:bg-slate-800 text-white font-bold rounded-xl shadow-lg shadow-slate-900/10 active:scale-[0.98] transition-all">
                        Complete Import
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Confirmation Modal -->
    <div id="modal-checkout"
        class="modal fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden items-center justify-center opacity-0 transition-opacity">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden transform scale-95 transition-transform duration-200">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                <h3 class="font-semibold text-lg text-slate-800">Finalize Sale</h3>
                <button onclick="closeModal('modal-checkout')"
                    class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <div class="p-6 space-y-4">
                <!-- Date & Inv No -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Date</label>
                        <input type="date" id="chk-date"
                            class="w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Inv No (Last
                            4)</label>
                        <input type="text" id="chk-custom-inv" maxlength="4" placeholder="Auto"
                            class="w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50 text-sm text-center">
                    </div>
                </div>

                <!-- Customer Details -->
                <div class="space-y-3 pt-2 border-t border-dashed border-gray-200">
                    <input type="text" id="chk-cust-name" placeholder="Customer Name (Optional)"
                        class="w-full px-3 py-2 text-sm rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50">
                    <input type="text" id="chk-cust-address" placeholder="Address (Optional)"
                        class="w-full px-3 py-2 text-sm rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-accent/50">
                </div>

                <!-- Financials -->
                <div class="space-y-3 pt-4 border-t border-gray-100">
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-600">Subtotal</span>
                        <span id="chk-subtotal" class="font-medium text-slate-800">0.00</span>
                    </div>

                    <div class="flex justify-between items-center gap-4">
                        <span class="text-sm text-gray-600 w-24">Delivery</span>
                        <div class="flex items-center gap-1 flex-1 justify-end">
                            <span class="text-xs text-gray-400">Rs.</span>
                            <input type="number" id="chk-delivery" value="0" min="0" oninput="calculateCheckoutTotal()"
                                class="w-24 text-right px-2 py-1 rounded border border-gray-200 focus:outline-none focus:ring-1 focus:ring-accent text-sm">
                        </div>
                    </div>

                    <div class="flex justify-between items-center gap-4">
                        <div class="flex items-center gap-2">
                            <span class="text-sm text-gray-600">Discount</span>
                            <select id="chk-discount-type" onchange="calculateCheckoutTotal()"
                                class="text-xs border border-gray-200 rounded bg-gray-50 py-0.5 px-1 focus:outline-none">
                                <option value="fixed">Rs.</option>
                                <option value="percent">%</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-1 flex-1 justify-end">
                            <input type="number" id="chk-discount-value" value="0" min="0" step="any"
                                oninput="calculateCheckoutTotal()"
                                class="w-24 text-right px-2 py-1 rounded border border-gray-200 focus:outline-none focus:ring-1 focus:ring-accent text-sm">
                        </div>
                    </div>

                    <div class="flex justify-between items-center pt-4 border-t border-gray-100">
                        <span class="text-lg font-bold text-slate-800">Total Payable</span>
                        <span id="chk-total" class="text-2xl font-bold text-accent">0.00</span>
                    </div>
                </div>
            </div>

            <div class="px-6 py-4 bg-gray-50 flex gap-3">
                <button onclick="closeModal('modal-checkout')"
                    class="px-4 py-3 bg-white border border-gray-200 text-gray-600 font-medium rounded-xl hover:bg-gray-100 transition-all">
                    Cancel
                </button>
                <button onclick="confirmCheckout(true)"
                    class="flex-1 py-3 bg-white border border-gray-200 text-slate-700 hover:bg-gray-50 font-bold rounded-xl shadow-sm transition-all flex items-center justify-center gap-2">
                    <i data-lucide="file-text" class="w-4 h-4"></i> Save Quote
                </button>
                <button onclick="confirmCheckout(false)"
                    class="flex-[2] py-3 bg-primary hover:bg-slate-800 text-white font-bold rounded-xl shadow-lg shadow-blue-900/10 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
                    Complete Sale <i data-lucide="check" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Hidden Invoice Template -->
    <div id="invoice-print" class="hidden print:block absolute inset-0 bg-white z-[100] p-0">
        <div class="max-w-[80mm] w-full mx-auto p-2 text-xs text-slate-900 font-mono leading-tight">
            <div class="text-center mb-6">
                <!-- Increased Invoice Logo Size -->
                <img src="Mirage Logo.png" alt="Mirage Logo" class="h-28 mx-auto mb-2 grayscale">
                <div class="border-b border-slate-900 w-12 mx-auto my-2"></div>
                <p class="text-xs text-gray-600">Vihara Mawatha, Sinharamulla, Kelaniya</p>
                <p class="text-xs text-gray-600 flex justify-center items-center gap-1">
                    <span>Tel/WhatsApp: 076 084 8072</span>
                </p>
            </div>

            <!-- Customer Details on Invoice -->
            <div class="mb-4 text-xs font-mono space-y-1 pb-2 border-b border-dashed border-gray-300"
                id="print-customer-section">
                <div class="flex justify-between">
                    <span>Customer:</span>
                    <span id="print-customer-name" class="font-medium"></span>
                </div>
                <div class="flex justify-between">
                    <span>Address:</span>
                    <span id="print-customer-address" class="font-medium text-right max-w-[120px] leading-tight"></span>
                </div>
            </div>

            <div class="mb-4 text-xs font-mono space-y-1">
                <div class="flex justify-between">
                    <span>Invoice:</span>
                    <span id="print-invoice-no" class="font-bold"></span>
                </div>
                <div class="flex justify-between">
                    <span>Date:</span>
                    <span id="print-date"></span>
                </div>
                <div class="flex justify-between">
                    <span>Type:</span>
                    <span id="print-type"></span>
                </div>
            </div>

            <div class="border-t border-b border-slate-900 border-dashed py-2 mb-4">
                <table class="w-full text-xs text-left">
                    <thead>
                        <tr>
                            <th class="pb-1">Item</th>
                            <th class="text-center pb-1">Qty</th>
                            <th class="text-right pb-1">Price (Rs.)</th>
                            <th class="text-right pb-1">Total (Rs.)</th>
                        </tr>
                    </thead>
                    <tbody id="print-items">
                        <!-- Items -->
                    </tbody>
                </table>
            </div>

            <div class="space-y-1 text-xs mb-8 border-t border-slate-900 border-dashed pt-2">
                <div class="flex justify-between">
                    <span>Subtotal</span>
                    <span id="print-subtotal"></span>
                </div>
                <div class="flex justify-between hidden" id="print-discount-row">
                    <span>Discount</span>
                    <span id="print-discount"></span>
                </div>
                <div class="flex justify-between">
                    <span>Delivery</span>
                    <span id="print-delivery"></span>
                </div>
                <div class="flex justify-between font-bold text-sm mt-1 pt-1 border-t border-slate-900">
                    <span>TOTAL</span>
                    <span id="print-total"></span>
                </div>
            </div>

            <div class="text-center text-[10px] text-gray-500">
                <p>Thank you for your purchase!</p>
                <p>No returns or exchanges.</p>
                <p class="mt-4">Software by Antigravity</p>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="fixed bottom-6 right-6 px-6 py-4 bg-slate-900 text-white rounded-xl shadow-2xl transform translate-y-24 transition-transform duration-300 z-50 flex items-center gap-3">
        <i data-lucide="check-circle" class="text-green-400 w-5 h-5"></i>
        <span id="toast-msg" class="font-medium text-sm">Operation successful</span>
    </div>

    <script src="db.js"></script>
    <script src="app.js"></script>
</body>

</html>